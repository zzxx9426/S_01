## Java线程 
Java内置支持多线程编程（multithreaded programming）.多线程程序包含两条或两条以上并发运行的部分，程序中每个这样的部分都叫一个线程（thread），每个线程都有独立的执行路径。因此，多线程是多任务处理的一种特殊形式。  
例如，同一个程序中实现“同时”执行代码逻辑！  
进程（process）本质上是一个执行的程序。因此，基于进程（process-based）的多任务处理的特点是允许你的计算机同时运行两个或更多的程序。举例来说，基于进程的多任务处理使你在运用文本编辑器的时候可以同时运行Java编辑器。在基于进程的多任务处理中，程序是调度程序所分派的最小代码单位。  
在基于线程（thread-based）的多任务处理环境中，线程是最小的执行单位。这意味着一个程序可以同时执行两个或者多个任务的功能。  
**多线程程序比多进程程序需要更少的管理费用。**  

## 线程模型  
Java的多线程系统建立于Thread类和Runable接口。在Java中，一般都是通过Thread和Runable接口去创建和管理线程执行我们的并行程序逻辑。Thread类定义了好几种方法来帮助管理线程。  
![](https://github.com/zzxx9426/S_01/blob/master/myPicture/JAVA/Thread%E7%B1%BB%E6%96%B9%E6%B3%95.png?raw=true)  


线程可以称之为一个程序（进程）的基本运行单位，所以，当我们运行一个Java程序，比如运行Java程序的Main方法，这时候就会有一个程序进程，这个进程中同时也有一个线程，称之为主线程！  
主线程的重要性体现在：  
* 它是产生其他子线程的线程。  
* 通常它必须最后完成执行，因为它执行各种关闭动作。  
主线程是运行程序时候自动创建的，但是其也是一个Thread类的实例对象。我们可以调用方法currentThread（）获得它的一个引用，currentThread（）是Thread类的公有的静态方法。  

## 创建线程 
* 我们可以通过继承Thread类，然后Override run()方法，然后穿件该类的实例来创建除了主线程之外的其他线程，并且在run（）方法中赋予属于这个线程的代码逻辑，这个run（）方法是新线程的入口。  
* 

****
多线程扩展了多进程的概念，使得同一个进程可以同时并发处理多个任务。线程（thread）也被称作轻量级进程，线程是进程的执行单元。就像进程在操作系统中的地位一样，线程在程序中是独立的、并发的执行流。当进程被初始化后，主线程就被创建了。对于绝大多数的应用程序来说，通常仅要求有一个主线程，但也可以在该进程内创建多条顺序执行刘，这些顺序执行流就是线程，每个线程也是互相独立的。  

线程是进程的组成部分，一个进程可以拥有多个线程，一个线程必须有一个父进程。 线程可以拥有自己的堆栈、自己的程序计数器和自己的局部变量，但不拥有系统资源，它与父进程的其他线程共享该进程所拥有的全部资源。因为多个线程共享父进程里的全部资源。但要小心，因为需要确保线程不会妨碍同一进程里的其他线程。  

线程可以与其他线程共享父进程中的共享变量即部分环境，相互之间协同来完成进程索要完成的任务。  

线程是独立运行的，并不知道进程中是否还有其他线程存在。线程的执行时抢占式的，当前运行的线程在任何时候都可能被挂起，以便另外一个线程可以运行。  

一个线程可以创建和撤销另一个线程，同一个进程中的多个线程之间可以并发执行。  

**操作系统可以同时执行多个任务，每个任务就是进程；进程可以同时执行多个任务，每个任务就是线程。**

进程在执行过程中拥有独立的内存单元，而多个线程共享内存，从而极大地提高了程序的运行效率。  

* 多线程编程 有以下几个有点：  
  * 进程之间不能共享内存，但线程之间共享内存非常容易。  
  * 系统创建进程时需要为该进程重新分配系统资源，但创建线程则代价小的多，因此使用多线程来实现多任务并发比多进程的效率高。  
  * Java语言内置了多线程功能支持，而不是单纯地作为底层操作系统的调度方式，从而简化了Java的多
  线程编程。

****

  ### 多线程和单线程有什么区别  
  * 单线程程序： 程序执行过程中只有一个有效操作的序列，不同操作之间都有明确的执行先后顺序，容易出现代码阻塞。  
  * 多线程程序： 有多个线程，线程间独立运行，能有效地避免代码阻塞，并且提高程序的运行性能。  

### 为什么使用多线程  

* 使用多线程可以减少程序的相应时间。在单线程的情况下，如果某个程序很耗时或者陷入长时间等待（如等待网络相应），此时程序将不会响应鼠标和键盘等操作，使用多线程后，可以把这个耗时的线程分配到一个单独的线程去执行，从而使程序具备更好的交互性。  

* 与进程相比，线程的创建和切换开销更小。由于启动一个新的线程必须给这个线程分配独立的地址空间，建立许多数据结构来维护线程代码段、数据段等信息，而运行于同一个进程内的线程共享代码段、数据段，线程的启动或切换的开销就比进程要少很多。同时多线程在数据共享方面效率非常高。  

* 多CPU或多核心计算机本身就具有执行多线程的能力。如果使用单个线程，将无法重复利用计算机资源，造成资源的巨大浪费。因此在多CPU计算机上使用多线程能提高CPU的利用率。  

* 使用多线程能简化程序的结构，使用程序便于理解和维护。一个非常复杂的进程可以分成多个线程来执行。  
### 什么是线程安全  

当多个线程访问同一个对象时，如果不用考虑这些线程在运行时环境下的调度和交替运行，也不要进行额外的同步，或者在调用方进行任何其他的协调操作，调用这个对象的行为都可以获取正确的的结果，那这个对象是线程安全的。   

### 为什么要使用线程同步  

Java允许多线程并发控制，当多个线程同时操作一个可共享的资源变量时（如数据的增删改查），将会导致数据不准确，相互之间产生冲突。  

因此加入同步锁以避免在该线程没有完成操作之前，被其他线程的调用，从而保证了该变量的唯一性和准确性。  


### 如何确保线程安全  

* 对非安全的代码进行加锁控制  
* 使用线程安全的类  
* 多线程并发情况下，线程共享的变量改为方法级的局部变量。  

### 什么是原子操作  

检查数值、改变数值，以及可能发生的睡眠操作均作为单一的、不可分割的原子操作。
